Quero instalar o Apache Kafka no WSL2 da minha m√°quina Windows. Depois que execut√°-lo e criar um programa Python que coloque uma mensagem "Viva o Fluminense" num t√≥pico. E depois quero criar outro programa Python que leia esse t√≥pico e imprima a mensagem na console. 
O ChatGPT disse:

Perfeito, vamos por partes. Aqui est√° um passo a passo direto, sem enrola√ß√£o:
1. Instalar Apache Kafka no WSL2 (Ubuntu)
Pr√©-requisitos:

    Java (Kafka precisa dele)

sudo apt update
sudo apt install openjdk-17-jdk -y

Baixar Kafka:

wget https://downloads.apache.org/kafka/3.7.0/kafka_2.13-3.7.0.tgz
tar -xvzf kafka_2.13-3.7.0.tgz
mv kafka_2.13-3.7.0 kafka
cd kafka

Iniciar Zookeeper:

bin/zookeeper-server-start.sh config/zookeeper.properties

    Deixe rodando esse terminal. Em outro terminal (ou aba):

Iniciar o Kafka:

bin/kafka-server-start.sh config/server.properties

2. Criar um t√≥pico chamado tricolor

Em uma nova aba ou terminal:

bin/kafka-topics.sh --create --topic tricolor --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1

3. Instalar depend√™ncia do Python

No WSL2 (ou at√© no Windows se for rodar por l√°):

pip install kafka-python

4. Criar o produtor Python (produtor.py)

from kafka import KafkaProducer

producer = KafkaProducer(bootstrap_servers='localhost:9092')
mensagem = "Viva o Fluminense"
producer.send('tricolor', mensagem.encode('utf-8'))
producer.flush()
print("Mensagem enviada.")

5. Criar o consumidor Python (consumidor.py)

from kafka import KafkaConsumer

consumer = KafkaConsumer(
    'tricolor',
    bootstrap_servers='localhost:9092',
    auto_offset_reset='earliest',
    enable_auto_commit=True,
    group_id='meu-grupo'
)

print("Aguardando mensagens...")
for msg in consumer:
    print("Recebido:", msg.value.decode('utf-8'))
    break  # Sai depois de receber a primeira

6. Rodar tudo

    Em um terminal: zookeeper

    Em outro: kafka

    Em outro: python consumidor.py

    Em outro: python produtor.py

Resultado esperado:

Recebido: Viva o Fluminense

Se quiser automatizar tudo com tmux, screen ou systemd depois, posso ajudar tamb√©m. Quer que empacote isso em um script bash?
Voc√™ disse:
J√° tenho o Java 8 instalado. Posso us√°-lo ao inv√©s de instalar o Java 17?
O ChatGPT disse:

Sim, pode usar o Java 8. O Kafka 3.x ainda √© compat√≠vel com o Java 8, mas com algumas ressalvas:
‚ö†Ô∏è Avisos sobre usar Java 8:

    Kafka 3.0 at√© 3.4: suporte oficial ao Java 8.

    Kafka 3.5+ (incluindo 3.7): funciona com Java 8, mas j√° est√° em processo de descontinua√ß√£o do suporte. Eles recomendam Java 11+.

    Zookeeper (necess√°rio pro Kafka): roda tranquilo com Java 8.

Resumindo:

Se voc√™ quer s√≥ testar localmente e n√£o se importa com poss√≠veis mensagens de deprecia√ß√£o, pode seguir com Java 8.
‚úÖ Dica pr√°tica:

Antes de rodar o Kafka com Java 8, s√≥ garanta que o JAVA_HOME est√° configurado:

export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
export PATH=$JAVA_HOME/bin:$PATH

Voc√™ pode colocar isso no .bashrc se quiser persist√™ncia.

Se der erro com Unsupported major.minor version, a√≠ sim vale subir para Java 11+.

Quer que eu adapte o script de instala√ß√£o para Kafka 3.4 (que tem suporte garantido ao Java 8) s√≥ pra garantir?
Voc√™ disse:
wget https://downloads.apache.org/kafka/3.7.0/kafka_2.13-3.7.0.tgz
--2025-06-12 10:37:41--  https://downloads.apache.org/kafka/3.7.0/kafka_2.13-3.7.0.tgz
Resolving downloads.apache.org (downloads.apache.org)... 135.181.214.104, 88.99.208.237, 2a01:4f9:3a:2c57::2, ...
Connecting to downloads.apache.org (downloads.apache.org)|135.181.214.104|:443... connected.
HTTP request sent, awaiting response... 404 Not Found
O ChatGPT disse:

O problema √© que o Kafka 3.7.0 ainda est√° no arquivo de arquivamento, mas n√£o no ramo downloads oficiais ‚Äî por isso seu wget resultou em 404. Duas solu√ß√µes r√°pidas:
üß© Op√ß√£o 1: Baixar uma vers√£o mais recente com mirror oficial

A vers√£o 3.9.1 √© a mais recente est√°vel com suporte a Java 8 (na pr√°tica). Use:

wget https://dlcdn.apache.org/kafka/kafka_2.13-3.9.1.tgz
tar -xvzf kafka_2.13-3.9.1.tgz
mv kafka_2.13-3.9.1 kafka
cd kafka

Essa vers√£o inclui corre√ß√µes importantes e mant√©m compatibilidade com Java 8
kineticedge.io+15kafka.apache.org+15archive.apache.org+15
.
üï∞Ô∏è Op√ß√£o 2: Usar 3.7.0 direto do arquivo Apache

Se voc√™ realmente quer a 3.7.0, segue:

wget https://archive.apache.org/dist/kafka/3.7.0/kafka_2.13-3.7.0.tgz
tar -xvzf kafka_2.13-3.7.0.tgz
mv kafka_2.13-3.7.0 kafka
cd kafka

Esse √© o mesmo arquivo que tentou baixar, mas direto do archive .
‚úÖ Resumo para voc√™ decidir ‚Äúna lata‚Äù:
Vers√£o	Mirror oficial	Compat√≠vel Java 8	Atualiza√ß√µes
3.9.1	Sim (dlcdn)	Sim	Corre√ß√µes e melhorias recentes
3.7.0	Arquivo (archive.apache.org)	Sim	Mais datada, sem melhorias recentes
Pr√≥ximos passos:

Depois de extrair a pasta kafka, siga normalmente:

    Inicie o ZooKeeper üîπ

    Em outro terminal, inicie o Kafka

    Crie o t√≥pico ‚Äútricolor‚Äù

    Execute o produtor e o consumidor Python conforme j√° fizemos

Me manda o terminal com o erro (se houver) e ajustamos na hora.
Voc√™ disse:
Agora que o arquivo .zip contendo um projeto Java (vers√£o 8) com Maven que tamb√©m insira uma mensagem nesse t√≥pico "tricolor" a mensagem "Vai ganhar o mundial.". E que tamb√©m consuma o conte√∫do desse t√≥pico. 
O ChatGPT disse:

Aqui est√° o arquivo .zip com um projeto Java 8 usando Maven que:

    Envia a mensagem "Vai ganhar o mundial." para o t√≥pico tricolor.

    L√™ e imprime essa mensagem no console.

üîó Clique aqui para baixar o projeto KafkaJavaProducerConsumer.zip
‚úÖ Como usar:

    Descompacte o projeto:

unzip KafkaJavaProducerConsumer.zip
cd KafkaJavaProducerConsumer

Compile com Maven:

mvn compile

Execute o produtor:

mvn exec:java -Dexec.mainClass="com.exemplo.kafka.Produtor"

Execute o consumidor:

    mvn exec:java -Dexec.mainClass="com.exemplo.kafka.Consumidor"

    Obs: Para rodar via exec:java, voc√™ pode adicionar o plugin do exec-maven-plugin no pom.xml, se quiser que eu adicione isso no ZIP, me avise.

Se quiser tamb√©m o equivalente em Python rodando lado a lado com esse Java, posso montar num segundo pacote. 
